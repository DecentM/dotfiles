#!/bin/false
# shellcheck shell=sh

# We don't have vercmd here yet
if command -v chezmoi >/dev/null; then
    DOTFILES_BASEDIR="$(chezmoi target-path)/.dotfiles"
else
    DOTFILES_BASEDIR="$(realpath "$(dirname "$0")")/home/dot_dotfiles"
fi

export DOTFILES_BASEDIR

. "$DOTFILES_BASEDIR/zsh/utils.zsh"

# If ssh-agent is available, and we have keys, start it
if vercmd ssh-agent; then
    eval "$(ssh-agent -s)" >/dev/null

    if glob_matches "id_*" "$HOME/.ssh"; then
        ssh-add ~/.ssh/id_* >/dev/null
    fi

    export SSH_AGENT_SOCK="$SSH_AUTH_SOCK"
fi
