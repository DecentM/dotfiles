{
  "$schema": "https://opencode.ai/config.json",
  "plugin": [
    "./plugins/audit-trail"
  ],
  "autoupdate": false,
  "snapshot": true,
  "logLevel": "WARN",
  "default_agent": "build",
  // "theme": "catppuccin",
  "keybinds": {},
  "tui": {
    "scroll_speed": 3,
    "scroll_acceleration": {
      "enabled": true
    },
    "diff_style": "auto"
  },
  // "agent": {},

  // "username": "your-name",
  // "model": "anthropic/claude-sonnet-4-20250514",
  // "small_model": "anthropic/claude-haiku",
  // "disabled_providers": [],
  // "enabled_providers": [],
  // "server": {
  //   "port": 8080,
  //   "hostname": "localhost",
  //   "mdns": false,
  //   "cors": []
  // },
  // "command": {},
  "watcher": {
    "ignore": ["node_modules/**", "dist/**", ".git/**"]
  },

  "share": "disabled",
  "permission": {
    "*": "deny",
    "edit": {
      "*": "allow",
      ".key": "deny",
      ".env": "deny",
      ".env.*": "deny",
      ".env.example": "allow",
    },
    "glob": "allow",
    "grep": "allow",
    "list": "allow",
    "todoread": "allow",
    "todowrite": "allow",

    // MCPs
    "sequentialthinking*": "allow",
    "memory*": "allow",
    "time*": "allow",

    // Custom tools
    "audit*": "allow"
  },
  "instructions": [
    "~/.dotfiles/opencode/rules/base.md",
    "AGENTS.md",
    ".cursor/rules/*.{md,mdx}",
  ],
  "mcp": {
    "sequentialthinking": {
      "type": "local",
      "command": [
        "docker",
        "run",
        "--rm",
        "-i",
        "--network=none",
        "--memory=512m",
        "--cpus=1",
        "mcp/sequentialthinking",
      ],
      "enabled": true,
    },

    "time": {
      "type": "local",
      "command": [
        "docker",
        "run",
        "--rm",
        "-i",
        "--network=none",
        "--memory=512m",
        "--cpus=1",
        "mcp/time",
      ],
      "enabled": true,
    },

    "github": {
      "type": "remote",
      "url": "https://api.githubcopilot.com/mcp",
      "enabled": true,
      "headers": {
        "Authorization": "Bearer {env:GITHUB_TOKEN}",
      },
    },

    "flaresolverr": {
      "type": "local",
      "command": [
        "bash",
        "-c",
        // Bundled container: Flaresolverr + Chromium + MCP server (~900MB, needs more resources)
        "docker run --rm -i --init --shm-size=2g --memory=2g --cpus=2 $(docker build -q -f ~/.dotfiles/opencode/docker/mcp-flaresolverr.dockerfile ~/.dotfiles/opencode/docker)",
      ],
      "enabled": true,
    },
  },
}
